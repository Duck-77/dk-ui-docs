import{d as K,aa as M,L as N,h as m,p as v,o as t,c as n,F as T,r as y,e as d,j as g,a2 as V,ab as U,K as $,k as w,b as B,n as C,ac as E}from"./framework.C2_qfHdj.js";import{_ as F}from"./Icon.vue_vue_type_script_setup_true_lang.CaVVuClK.js";import{f as L}from"./FormItem.DI4IDgGP.js";const q={key:0,class:"dk-input__prepend"},G={key:0,class:"dk-input__prefix"},H=["type","readonly","placeholder","form","autocomplete","autofocus","disabled"],J={key:1,class:"dk-input__suffix"},O={key:1,class:"dk-input__append"},Q=["readonly","placeholder","form","autocomplete","autofocus","disabled"],Z=K({name:"DkInput",inheritAttrs:!1,__name:"Input",props:{modelValue:{},type:{default:"text"},size:{},disabled:{type:Boolean},clearable:{type:Boolean},showPassword:{type:Boolean},placeholder:{},readonly:{type:Boolean},autocomplete:{default:"off"},autofocus:{type:Boolean,default:!1},form:{},inputStyle:{}},emits:["update:modelValue","input","change","focus","blur","clear"],setup(S,{expose:z,emit:P}){const o=S,s=P,k=M(),i=N(L,void 0),D=m(()=>!!i),r=v(),p=v(!1),h=m(()=>p.value&&o.clearable&&!!o.modelValue),f=v(!1),b=m(()=>o.showPassword&&!o.disabled&&!!o.modelValue),c=m({get(){return o.modelValue},set(e){e!==o.modelValue&&(l("input"),s("update:modelValue",e),s("input",e),l("input"))}}),I=()=>{s("change",o.modelValue),l("change")},R=e=>{p.value=!0,s("focus",e),l("focus")},j=e=>{p.value=!1,s("blur",e),l("blur")},A=()=>{s("update:modelValue",""),s("input",""),s("change",""),s("clear"),l("change"),l("clear"),l("input"),console.log("clear",o.modelValue)},l=e=>{D.value&&(i==null||i.validate(e).catch(a=>{console.log("validate failed:",a.errors)}))};return z({ref:r,blur:()=>{var e;(e=r.value)==null||e.blur(),l()},clear:()=>{s("update:modelValue","")},focus:()=>{var e;(e=r.value)==null||e.focus()},select:()=>{var e;(e=r.value)==null||e.select()}}),(e,a)=>(t(),n("div",{class:C(["dk-input",{[`dk-input--${e.type}`]:e.type,[`dk-input--${e.size}`]:e.size,"is-disabled":e.disabled,"is-prepend":e.$slots.prepend,"is-append":e.$slots.append,"is-prefix":e.$slots.prefix,"is-suffix":e.$slots.suffix,"is-focus":p.value}])},[e.type!=="textarea"?(t(),n(T,{key:0},[e.$slots.prepend?(t(),n("div",q,[y(e.$slots,"prepend")])):d("",!0),g("div",{class:C(["dk-input__wrapper",{"is-focus":p.value}])},[e.$slots.prefix?(t(),n("span",G,[y(e.$slots,"prefix")])):d("",!0),V(g("input",$({ref_key:"inputRef",ref:r,class:"dk-input__inner",style:e.inputStyle},w(k),{"onUpdate:modelValue":a[0]||(a[0]=u=>c.value=u),type:e.showPassword?f.value?"text":"password":e.type,readonly:e.readonly,placeholder:e.placeholder,form:e.form,autocomplete:e.autocomplete,autofocus:e.autofocus,disabled:e.disabled,onFocus:a[1]||(a[1]=u=>R(u)),onBlur:a[2]||(a[2]=u=>j(u)),onChange:I}),null,16,H),[[U,c.value]]),e.$slots.suffix||h.value||b.value?(t(),n("span",J,[y(e.$slots,"suffix"),h.value?(t(),B(F,{key:0,class:"dk-input__clear",icon:"fa-regular fa-circle-xmark",onClick:A})):d("",!0),b.value?(t(),B(F,{key:1,class:"dk-input__password-toogle",icon:f.value?"fa-regular fa-eye":"fa-regular fa-eye-slash",onClick:a[3]||(a[3]=u=>f.value=!f.value)},null,8,["icon"])):d("",!0)])):d("",!0)],2),e.$slots.append?(t(),n("div",O,[y(e.$slots,"append")])):d("",!0)],64)):V((t(),n("textarea",$({key:1,ref_key:"inputRef",ref:r,class:"dk-textarea__wrapper",style:e.inputStyle},w(k),{"onUpdate:modelValue":a[4]||(a[4]=u=>c.value=u),readonly:e.readonly,placeholder:e.placeholder,form:e.form,autocomplete:e.autocomplete,autofocus:e.autofocus,disabled:e.disabled}),null,16,Q)),[[E,c.value]])],2))}});export{Z as _};
