import{d as _,L as b,h as l,p as S,v as z,P as B,o as n,c as p,a2 as A,a8 as T,j as d,X as C,b as r,e as w,t as I,Z as N,n as j,N as D}from"./framework.C2_qfHdj.js";import{_ as u}from"./Icon.vue_vue_type_script_setup_true_lang.CaVVuClK.js";import{f as K}from"./FormItem.DI4IDgGP.js";const M=["name","disabled"],R={class:"dk-switch__core-action"},E={class:"dk-switch__core-inner"},$={key:0,class:"dk-switch__core-inner-text"},U=_({name:"DkSwitch",inheritAttrs:!1,__name:"Switch",props:{id:{},name:{},modelValue:{type:[Boolean,String,Number]},icon:{},size:{},loading:{type:Boolean},disabled:{type:Boolean},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeText:{},inactiveText:{},style:{},activeActionIcon:{},inactiveActionIcon:{},beforeChange:{}},emits:["change","update:modelValue"],setup(k,{emit:g}){const i=k,v=g,s=b(K,void 0),y=l(()=>!!s),m=S(),h=()=>{const e=(a=!0)=>{let t;a?t=c.value?i.inactiveValue:i.activeValue:t=i.inactiveValue,v("change",t),v("update:modelValue",t),V("change")};f.value||(i.beforeChange?i.beforeChange().then(a=>{a?e():(e(!1),console.warn("Switch toogle failed witch reason: reject false"))}).catch(a=>{e(!1),console.warn("Switch toogle failed witch reason:"+a)}):e())},o=l({get(){return i.modelValue},set(){h()}}),c=l(()=>o.value===i.activeValue),f=l(()=>i.disabled||i.loading),V=e=>{y.value&&(s==null||s.validate(e).catch(a=>{console.log("validate failed:",a.errors)}))};return z(()=>{m.value.checked=c.value,B(()=>{i.inactiveValue&&i.activeValue&&v("update:modelValue",i.inactiveValue)})}),(e,a)=>(n(),p("div",{class:j(["dk-switch",{[`dk-switch--${e.size}`]:e.size,"is-disabled":e.disabled,"is-loading":e.loading,"is-checked":c.value}]),style:D(e.style)},[A(d("input",{ref_key:"inputRef",ref:m,class:"dk-switch__input",type:"radio",role:"switch",name:e.name,"onUpdate:modelValue":a[0]||(a[0]=t=>o.value=t),disabled:f.value,onKeydown:C(h,["enter"])},null,40,M),[[T,o.value]]),d("div",{class:"dk-switch__core",onClick:N(h,["prevent"])},[d("div",R,[e.loading?(n(),r(u,{key:0,class:"dk-switch__core-action-loading",size:"xs",icon:"spinner",spin:""})):e.activeActionIcon&&o.value?(n(),r(u,{key:1,class:"dk-switch__core-action-icon",size:"xs",icon:e.activeActionIcon},null,8,["icon"])):e.inactiveActionIcon&&!o.value?(n(),r(u,{key:2,class:"dk-switch__core-action-icon",size:"xs",icon:e.inactiveActionIcon},null,8,["icon"])):e.icon?(n(),r(u,{key:3,class:"dk-switch__core-action-icon",size:"xs",icon:e.icon},null,8,["icon"])):w("",!0)]),d("div",E,[e.activeText&&e.inactiveText?(n(),p("span",$,I(c.value?e.activeText:e.inactiveText),1)):w("",!0)])])],6))}});export{U as _};
